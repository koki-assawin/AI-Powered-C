<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - AI-Powered Code Practice System</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Sarabun', sans-serif;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .gradient-bg {
            background: linear-gradient(-45deg, #667eea, #764ba2, #f093fb, #4facfe);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <div class="min-h-screen flex items-center justify-center p-4">
        <div class="glass-effect rounded-3xl shadow-2xl max-w-4xl w-full p-8">
            <!-- Header -->
            <div class="text-center mb-8">
                <div class="flex justify-center mb-4">
                    <div class="w-20 h-20 bg-gradient-to-br from-purple-600 to-blue-600 rounded-full flex items-center justify-center shadow-lg">
                        <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                        </svg>
                    </div>
                </div>
                <h1 class="text-4xl font-bold text-gray-800 mb-2">Admin Control Panel</h1>
                <p class="text-gray-600">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ API Key ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•</p>
            </div>

            <div id="app"></div>
        </div>
    </div>

    <script>
        const AdminPanel = () => {
            const [password, setPassword] = React.useState('');
            const [isAuthenticated, setIsAuthenticated] = React.useState(false);
            const [globalApiKey, setGlobalApiKey] = React.useState('');
            const [showApiKey, setShowApiKey] = React.useState(false);
            const [message, setMessage] = React.useState({ type: '', text: '' });
            const [stats, setStats] = React.useState({ users: 0, lastUpdate: '' });

            // Admin password (‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏ô‡∏µ‡πâ)
            const ADMIN_PASSWORD = 'admin2025'; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£

            React.useEffect(() => {
                // ‡πÇ‡∏´‡∏•‡∏î API Key ‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ
                const savedKey = localStorage.getItem('system_api_key');
                if (savedKey) {
                    setGlobalApiKey(savedKey);

                    // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
                    const lastUpdate = localStorage.getItem('api_key_last_update');
                    if (lastUpdate) {
                        setStats({
                            users: 'Unlimited',
                            lastUpdate: new Date(lastUpdate).toLocaleString('th-TH')
                        });
                    }
                }
            }, [isAuthenticated]);

            const handleLogin = (e) => {
                e.preventDefault();
                if (password === ADMIN_PASSWORD) {
                    setIsAuthenticated(true);
                    setMessage({ type: 'success', text: '‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!' });
                } else {
                    setMessage({ type: 'error', text: '‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!' });
                }
            };

            const handleSaveApiKey = () => {
                if (!globalApiKey.trim()) {
                    setMessage({ type: 'error', text: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å API Key' });
                    return;
                }

                // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å API Key ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö
                localStorage.setItem('system_api_key', globalApiKey);
                localStorage.setItem('gemini_api_key', globalApiKey); // ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö backward compatibility
                localStorage.setItem('api_key_last_update', new Date().toISOString());

                setStats({
                    users: 'Unlimited',
                    lastUpdate: new Date().toLocaleString('th-TH')
                });

                setMessage({
                    type: 'success',
                    text: '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å API Key ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ'
                });
            };

            const handleTestApiKey = async () => {
                if (!globalApiKey.trim()) {
                    setMessage({ type: 'error', text: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å API Key' });
                    return;
                }

                setMessage({ type: 'info', text: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö API Key...' });

                try {
                    const response = await fetch(
                        `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${globalApiKey}`,
                        {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                contents: [{
                                    role: "user",
                                    parts: [{ text: "Hello" }]
                                }]
                            })
                        }
                    );

                    if (response.ok) {
                        setMessage({
                            type: 'success',
                            text: 'API Key ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥! ‚úÖ'
                        });
                    } else {
                        const errorText = await response.text();
                        setMessage({
                            type: 'error',
                            text: `API Key ‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ${response.status} - ${errorText}`
                        });
                    }
                } catch (error) {
                    setMessage({
                        type: 'error',
                        text: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö: ' + error.message
                    });
                }
            };

            const handleClearApiKey = () => {
                if (confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö API Key?')) {
                    localStorage.removeItem('system_api_key');
                    localStorage.removeItem('gemini_api_key');
                    localStorage.removeItem('api_key_last_update');
                    setGlobalApiKey('');
                    setStats({ users: 0, lastUpdate: '' });
                    setMessage({ type: 'success', text: '‡∏•‡∏ö API Key ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à' });
                }
            };

            // Login Form
            if (!isAuthenticated) {
                return (
                    <div class="max-w-md mx-auto">
                        <form onSubmit={handleLogin} class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    üîê ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö
                                </label>
                                <input
                                    type="password"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô Admin"
                                    class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                    autoFocus
                                />
                            </div>

                            {message.text && (
                                <div class={`p-4 rounded-lg ${
                                    message.type === 'error' ? 'bg-red-100 text-red-700 border border-red-300' :
                                    'bg-green-100 text-green-700 border border-green-300'
                                }`}>
                                    {message.text}
                                </div>
                            )}

                            <button
                                type="submit"
                                class="w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all shadow-lg"
                            >
                                ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
                            </button>

                            <div class="text-center">
                                <a href="index.html" class="text-blue-600 hover:underline text-sm">
                                    ‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
                                </a>
                            </div>
                        </form>

                        <div class="mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                            <p class="text-xs text-yellow-800">
                                <strong>‚ö†Ô∏è ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô:</strong> ‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ API Key ‡∏Å‡∏•‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö
                            </p>
                        </div>
                    </div>
                );
            }

            // Admin Dashboard
            return (
                <div class="space-y-8">
                    {/* Stats */}
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-xl p-6 shadow-lg">
                            <div class="text-sm opacity-90 mb-1">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö</div>
                            <div class="text-3xl font-bold">
                                {globalApiKey ? 'üü¢ Active' : 'üî¥ Inactive'}
                            </div>
                        </div>
                        <div class="bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-xl p-6 shadow-lg">
                            <div class="text-sm opacity-90 mb-1">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</div>
                            <div class="text-3xl font-bold">{stats.users}</div>
                        </div>
                        <div class="bg-gradient-to-br from-pink-500 to-pink-600 text-white rounded-xl p-6 shadow-lg">
                            <div class="text-sm opacity-90 mb-1">‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</div>
                            <div class="text-sm font-bold">{stats.lastUpdate || '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•'}</div>
                        </div>
                    </div>

                    {/* API Key Management */}
                    <div class="bg-white rounded-2xl p-6 shadow-lg border-2 border-gray-200">
                        <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                            <svg class="w-8 h-8 mr-3 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z" />
                            </svg>
                            ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ API Key ‡∏Å‡∏•‡∏≤‡∏á
                        </h2>

                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    Google Gemini API Key
                                </label>
                                <div class="relative">
                                    <input
                                        type={showApiKey ? "text" : "password"}
                                        value={globalApiKey}
                                        onChange={(e) => setGlobalApiKey(e.target.value)}
                                        placeholder="‡∏Å‡∏£‡∏≠‡∏Å API Key ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..."
                                        class="w-full px-4 py-3 pr-12 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent font-mono text-sm"
                                    />
                                    <button
                                        type="button"
                                        onClick={() => setShowApiKey(!showApiKey)}
                                        class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"
                                    >
                                        {showApiKey ? 'üëÅÔ∏è' : 'üëÅÔ∏è‚Äçüó®Ô∏è'}
                                    </button>
                                </div>
                            </div>

                            {message.text && (
                                <div class={`p-4 rounded-lg border-2 ${
                                    message.type === 'error' ? 'bg-red-50 text-red-700 border-red-300' :
                                    message.type === 'success' ? 'bg-green-50 text-green-700 border-green-300' :
                                    'bg-blue-50 text-blue-700 border-blue-300'
                                }`}>
                                    <p class="font-medium">{message.text}</p>
                                </div>
                            )}

                            <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                                <button
                                    onClick={handleSaveApiKey}
                                    class="bg-gradient-to-r from-green-500 to-green-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-600 hover:to-green-700 transition-all shadow-lg flex items-center justify-center"
                                >
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                    </svg>
                                    ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å API Key
                                </button>

                                <button
                                    onClick={handleTestApiKey}
                                    class="bg-gradient-to-r from-blue-500 to-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all shadow-lg flex items-center justify-center"
                                >
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                    ‡∏ó‡∏î‡∏™‡∏≠‡∏ö API Key
                                </button>

                                <button
                                    onClick={handleClearApiKey}
                                    class="bg-gradient-to-r from-red-500 to-red-600 text-white font-bold py-3 px-6 rounded-lg hover:from-red-600 hover:to-red-700 transition-all shadow-lg flex items-center justify-center"
                                >
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                    </svg>
                                    ‡∏•‡∏ö API Key
                                </button>
                            </div>
                        </div>
                    </div>

                    {/* Instructions */}
                    <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-6 border-2 border-blue-200">
                        <h3 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                            <svg class="w-6 h-6 mr-2 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            ‡∏ß‡∏¥‡∏ò‡∏µ‡∏£‡∏±‡∏ö API Key
                        </h3>
                        <ol class="list-decimal list-inside space-y-2 text-gray-700">
                            <li>‡πÄ‡∏õ‡∏¥‡∏î <a href="https://aistudio.google.com/app/apikey" target="_blank" class="text-blue-600 hover:underline font-medium">Google AI Studio</a></li>
                            <li>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Google Account</li>
                            <li>‡∏Ñ‡∏•‡∏¥‡∏Å "Create API Key" ‡∏´‡∏£‡∏∑‡∏≠ "Get API Key"</li>
                            <li>‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å API Key ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ</li>
                            <li>‡∏ô‡∏≥‡∏°‡∏≤‡∏ß‡∏≤‡∏á‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏•‡∏¥‡∏Å "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å API Key"</li>
                        </ol>

                        <div class="mt-4 p-4 bg-yellow-50 border-2 border-yellow-300 rounded-lg">
                            <p class="text-sm text-yellow-800">
                                <strong>‚ö†Ô∏è ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:</strong> API Key ‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡πÇ‡∏î‡∏¢‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ API Key ‡∏ó‡∏µ‡πà‡∏°‡∏µ quota ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠
                                ‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥
                            </p>
                        </div>
                    </div>

                    {/* Actions */}
                    <div class="flex justify-between items-center">
                        <button
                            onClick={() => setIsAuthenticated(false)}
                            class="text-gray-600 hover:text-gray-800 font-medium flex items-center"
                        >
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                            </svg>
                            ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
                        </button>

                        <a
                            href="index.html"
                            class="bg-gradient-to-r from-purple-600 to-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all shadow-lg flex items-center"
                        >
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                            </svg>
                            ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
                        </a>
                    </div>
                </div>
            );
        };

        // Render
        const root = ReactDOM.createRoot(document.getElementById('app'));
        root.render(<AdminPanel />);
    </script>

    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Re-render the component with hooks
        const AdminPanelApp = () => {
            const [password, setPassword] = useState('');
            const [isAuthenticated, setIsAuthenticated] = useState(false);
            const [globalApiKey, setGlobalApiKey] = useState('');
            const [showApiKey, setShowApiKey] = useState(false);
            const [message, setMessage] = useState({ type: '', text: '' });
            const [stats, setStats] = useState({ users: 0, lastUpdate: '' });

            const ADMIN_PASSWORD = 'admin2025';

            useEffect(() => {
                if (isAuthenticated) {
                    const savedKey = localStorage.getItem('system_api_key');
                    if (savedKey) {
                        setGlobalApiKey(savedKey);
                        const lastUpdate = localStorage.getItem('api_key_last_update');
                        if (lastUpdate) {
                            setStats({
                                users: 'Unlimited',
                                lastUpdate: new Date(lastUpdate).toLocaleString('th-TH')
                            });
                        }
                    }
                }
            }, [isAuthenticated]);

            const handleLogin = (e) => {
                e.preventDefault();
                if (password === ADMIN_PASSWORD) {
                    setIsAuthenticated(true);
                    setMessage({ type: 'success', text: '‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!' });
                } else {
                    setMessage({ type: 'error', text: '‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á!' });
                }
            };

            const handleSaveApiKey = () => {
                if (!globalApiKey.trim()) {
                    setMessage({ type: 'error', text: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å API Key' });
                    return;
                }

                localStorage.setItem('system_api_key', globalApiKey);
                localStorage.setItem('gemini_api_key', globalApiKey);
                localStorage.setItem('api_key_last_update', new Date().toISOString());

                setStats({
                    users: 'Unlimited',
                    lastUpdate: new Date().toLocaleString('th-TH')
                });

                setMessage({
                    type: 'success',
                    text: '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å API Key ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ'
                });
            };

            const handleTestApiKey = async () => {
                if (!globalApiKey.trim()) {
                    setMessage({ type: 'error', text: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å API Key' });
                    return;
                }

                setMessage({ type: 'info', text: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö API Key...' });

                try {
                    const response = await fetch(
                        `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${globalApiKey}`,
                        {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                contents: [{
                                    role: "user",
                                    parts: [{ text: "Hello" }]
                                }]
                            })
                        }
                    );

                    if (response.ok) {
                        setMessage({
                            type: 'success',
                            text: 'API Key ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥! ‚úÖ'
                        });
                    } else {
                        setMessage({
                            type: 'error',
                            text: `API Key ‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ${response.status}`
                        });
                    }
                } catch (error) {
                    setMessage({
                        type: 'error',
                        text: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö: ' + error.message
                    });
                }
            };

            const handleClearApiKey = () => {
                if (confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö API Key?')) {
                    localStorage.removeItem('system_api_key');
                    localStorage.removeItem('gemini_api_key');
                    localStorage.removeItem('api_key_last_update');
                    setGlobalApiKey('');
                    setStats({ users: 0, lastUpdate: '' });
                    setMessage({ type: 'success', text: '‡∏•‡∏ö API Key ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à' });
                }
            };

            if (!isAuthenticated) {
                return (
                    <div className="max-w-md mx-auto">
                        <form onSubmit={handleLogin} className="space-y-6">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">
                                    üîê ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö
                                </label>
                                <input
                                    type="password"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô Admin"
                                    className="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                    autoFocus
                                />
                            </div>

                            {message.text && (
                                <div className={`p-4 rounded-lg ${
                                    message.type === 'error' ? 'bg-red-100 text-red-700 border border-red-300' :
                                    'bg-green-100 text-green-700 border border-green-300'
                                }`}>
                                    {message.text}
                                </div>
                            )}

                            <button
                                type="submit"
                                className="w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all shadow-lg"
                            >
                                ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
                            </button>

                            <div className="text-center">
                                <a href="index.html" className="text-blue-600 hover:underline text-sm">
                                    ‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
                                </a>
                            </div>
                        </form>

                        <div className="mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                            <p className="text-xs text-yellow-800">
                                <strong>‚ö†Ô∏è ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô:</strong> ‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ API Key ‡∏Å‡∏•‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö
                            </p>
                        </div>
                    </div>
                );
            }

            return (
                <div className="space-y-8">
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div className="bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-xl p-6 shadow-lg">
                            <div className="text-sm opacity-90 mb-1">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö</div>
                            <div className="text-3xl font-bold">
                                {globalApiKey ? 'üü¢ Active' : 'üî¥ Inactive'}
                            </div>
                        </div>
                        <div className="bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-xl p-6 shadow-lg">
                            <div className="text-sm opacity-90 mb-1">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</div>
                            <div className="text-3xl font-bold">{stats.users}</div>
                        </div>
                        <div className="bg-gradient-to-br from-pink-500 to-pink-600 text-white rounded-xl p-6 shadow-lg">
                            <div className="text-sm opacity-90 mb-1">‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</div>
                            <div className="text-sm font-bold">{stats.lastUpdate || '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•'}</div>
                        </div>
                    </div>

                    <div className="bg-white rounded-2xl p-6 shadow-lg border-2 border-gray-200">
                        <h2 className="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                            <svg className="w-8 h-8 mr-3 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z" />
                            </svg>
                            ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ API Key ‡∏Å‡∏•‡∏≤‡∏á
                        </h2>

                        <div className="space-y-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">
                                    Google Gemini API Key
                                </label>
                                <div className="relative">
                                    <input
                                        type={showApiKey ? "text" : "password"}
                                        value={globalApiKey}
                                        onChange={(e) => setGlobalApiKey(e.target.value)}
                                        placeholder="‡∏Å‡∏£‡∏≠‡∏Å API Key ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..."
                                        className="w-full px-4 py-3 pr-12 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent font-mono text-sm"
                                    />
                                    <button
                                        type="button"
                                        onClick={() => setShowApiKey(!showApiKey)}
                                        className="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700"
                                    >
                                        {showApiKey ? 'üëÅÔ∏è' : 'üëÅÔ∏è‚Äçüó®Ô∏è'}
                                    </button>
                                </div>
                            </div>

                            {message.text && (
                                <div className={`p-4 rounded-lg border-2 ${
                                    message.type === 'error' ? 'bg-red-50 text-red-700 border-red-300' :
                                    message.type === 'success' ? 'bg-green-50 text-green-700 border-green-300' :
                                    'bg-blue-50 text-blue-700 border-blue-300'
                                }`}>
                                    <p className="font-medium">{message.text}</p>
                                </div>
                            )}

                            <div className="grid grid-cols-1 md:grid-cols-3 gap-3">
                                <button
                                    onClick={handleSaveApiKey}
                                    className="bg-gradient-to-r from-green-500 to-green-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-600 hover:to-green-700 transition-all shadow-lg flex items-center justify-center"
                                >
                                    <svg className="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 13l4 4L19 7" />
                                    </svg>
                                    ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å API Key
                                </button>

                                <button
                                    onClick={handleTestApiKey}
                                    className="bg-gradient-to-r from-blue-500 to-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all shadow-lg flex items-center justify-center"
                                >
                                    <svg className="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                    ‡∏ó‡∏î‡∏™‡∏≠‡∏ö API Key
                                </button>

                                <button
                                    onClick={handleClearApiKey}
                                    className="bg-gradient-to-r from-red-500 to-red-600 text-white font-bold py-3 px-6 rounded-lg hover:from-red-600 hover:to-red-700 transition-all shadow-lg flex items-center justify-center"
                                >
                                    <svg className="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                    </svg>
                                    ‡∏•‡∏ö API Key
                                </button>
                            </div>
                        </div>
                    </div>

                    <div className="bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-6 border-2 border-blue-200">
                        <h3 className="text-xl font-bold text-gray-800 mb-4 flex items-center">
                            <svg className="w-6 h-6 mr-2 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            ‡∏ß‡∏¥‡∏ò‡∏µ‡∏£‡∏±‡∏ö API Key
                        </h3>
                        <ol className="list-decimal list-inside space-y-2 text-gray-700">
                            <li>‡πÄ‡∏õ‡∏¥‡∏î <a href="https://aistudio.google.com/app/apikey" target="_blank" className="text-blue-600 hover:underline font-medium">Google AI Studio</a></li>
                            <li>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢ Google Account</li>
                            <li>‡∏Ñ‡∏•‡∏¥‡∏Å "Create API Key" ‡∏´‡∏£‡∏∑‡∏≠ "Get API Key"</li>
                            <li>‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å API Key ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ</li>
                            <li>‡∏ô‡∏≥‡∏°‡∏≤‡∏ß‡∏≤‡∏á‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏•‡∏¥‡∏Å "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å API Key"</li>
                        </ol>

                        <div className="mt-4 p-4 bg-yellow-50 border-2 border-yellow-300 rounded-lg">
                            <p className="text-sm text-yellow-800">
                                <strong>‚ö†Ô∏è ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:</strong> API Key ‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡πÇ‡∏î‡∏¢‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ API Key ‡∏ó‡∏µ‡πà‡∏°‡∏µ quota ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠
                                ‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥
                            </p>
                        </div>
                    </div>

                    <div className="flex justify-between items-center">
                        <button
                            onClick={() => setIsAuthenticated(false)}
                            className="text-gray-600 hover:text-gray-800 font-medium flex items-center"
                        >
                            <svg className="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                            </svg>
                            ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
                        </button>

                        <a
                            href="index.html"
                            className="bg-gradient-to-r from-purple-600 to-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:from-purple-700 hover:to-blue-700 transition-all shadow-lg flex items-center"
                        >
                            <svg className="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                            </svg>
                            ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
                        </a>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<AdminPanelApp />, document.getElementById('app'));
    </script>
</body>
</html>
